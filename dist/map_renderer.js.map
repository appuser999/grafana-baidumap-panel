{"version":3,"sources":["../src/map_renderer.js"],"names":["link","scope","elem","attrs","ctrl","events","on","render","renderingCompleted","data","mapContainer","find","id","indexOf","map","MP","panel","ak","then","console","log","elementId","BMap","Map","centerAndZoom","Point","mapCenterLatitude","mapCenterLongitude","initialZoom","enableScrollWheelZoom","navigationSwitch","NavigationControl","scaleSwitch","ScaleControl","overviewMapSwitch","OverviewMapControl","isOpen","anchor","BMAP_ANCHOR_BOTTOM_RIGHT","mapTypeSwitch","MapTypeControl","navigation","addControl","scale","overviewMap","mapType","BaiduMap"],"mappings":";;;;;;AAKe,WAASA,IAAT,CAAcC,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC;AACrDA,SAAKC,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC7BC;AACAH,WAAKI,kBAAL;AACD,KAHD;;AAKA,aAASD,MAAT,GAAkB;AAChB,UAAI,CAACH,KAAKK,IAAV,EAAgB;;AAEhB,UAAMC,eAAeR,KAAKS,IAAL,CAAU,eAAV,CAArB;;AAEA,UAAID,aAAa,CAAb,EAAgBE,EAAhB,CAAmBC,OAAnB,CAA2B,IAA3B,IAAmC,CAAC,CAAxC,EAA2C;AACzC;AACD;;AAED,UAAI,CAACT,KAAKU,GAAV,EAAe;AACbC,WAAGX,KAAKY,KAAL,CAAWC,EAAd,EAAkBC,IAAlB,CAAuB,gBAAQ;AAC7BC,kBAAQC,GAAR,CAAYhB,KAAKY,KAAjB;AACA,cAAMK,YAAY,WAAWjB,KAAKY,KAAL,CAAWJ,EAAxC;AACAR,eAAKU,GAAL,GAAW,IAAIQ,KAAKC,GAAT,CAAaF,SAAb,CAAX;AACAjB,eAAKU,GAAL,CAASU,aAAT,CAAuB,IAAIF,KAAKG,KAAT,CAAerB,KAAKY,KAAL,CAAWU,iBAA1B,EAA6CtB,KAAKY,KAAL,CAAWW,kBAAxD,CAAvB,EAAoGvB,KAAKY,KAAL,CAAWY,WAA/G;AACAxB,eAAKU,GAAL,CAASe,qBAAT;;AAEAzB,eAAKY,KAAL,CAAWc,gBAAX,GAA8B,IAAIR,KAAKS,iBAAT,EAA9B;AACA3B,eAAKY,KAAL,CAAWgB,WAAX,GAAyB,IAAIV,KAAKW,YAAT,EAAzB;AACA7B,eAAKY,KAAL,CAAWkB,iBAAX,GAA+B,IAAIZ,KAAKa,kBAAT,CAA4B,EAACC,QAAO,IAAR,EAAcC,QAAQC,wBAAtB,EAA5B,CAA/B;AACAlC,eAAKY,KAAL,CAAWuB,aAAX,GAA2B,IAAIjB,KAAKkB,cAAT,EAA3B;;AAEA,cAAGpC,KAAKY,KAAL,CAAWyB,UAAX,KAA0B,IAA7B,EAAkCrC,KAAKU,GAAL,CAAS4B,UAAT,CAAoBtC,KAAKY,KAAL,CAAWc,gBAA/B;AAClC,cAAG1B,KAAKY,KAAL,CAAW2B,KAAX,KAAqB,IAAxB,EAA6BvC,KAAKU,GAAL,CAAS4B,UAAT,CAAoBtC,KAAKY,KAAL,CAAWgB,WAA/B;AAC7B,cAAG5B,KAAKY,KAAL,CAAW4B,WAAX,KAA2B,IAA9B,EAAmCxC,KAAKU,GAAL,CAAS4B,UAAT,CAAoBtC,KAAKY,KAAL,CAAWkB,iBAA/B;AACnC,cAAG9B,KAAKY,KAAL,CAAW6B,OAAX,KAAuB,IAA1B,EAA+BzC,KAAKU,GAAL,CAAS4B,UAAT,CAAoBtC,KAAKY,KAAL,CAAWuB,aAA/B;AAChC,SAhBD;AAiBD;AACD;;AAEA;;AAEA;;AAEA;AACD;AACF;;qBA1CuBvC,I;;;;AAJjB8C,c;;AACE/B,Q,mBAAAA,E","file":"map_renderer.js","sourcesContent":["import './css/leaflet.css!';\nimport BaiduMap from './baidumap';\nimport { MP } from \"./libs/baidumap.js\";  \n\n\nexport default function link(scope, elem, attrs, ctrl) {\n  ctrl.events.on('render', () => {\n    render();\n    ctrl.renderingCompleted();\n  });\n\n  function render() {\n    if (!ctrl.data) return;\n\n    const mapContainer = elem.find('.mapcontainer');\n\n    if (mapContainer[0].id.indexOf('{{') > -1) {\n      return;\n    }\n\n    if (!ctrl.map) {\n      MP(ctrl.panel.ak).then(BMap => {\n        console.log(ctrl.panel);\n        const elementId = \"mapid_\" + ctrl.panel.id;\n        ctrl.map = new BMap.Map(elementId);\n        ctrl.map.centerAndZoom(new BMap.Point(ctrl.panel.mapCenterLatitude, ctrl.panel.mapCenterLongitude), ctrl.panel.initialZoom);\n        ctrl.map.enableScrollWheelZoom();\n\n        ctrl.panel.navigationSwitch = new BMap.NavigationControl();\n        ctrl.panel.scaleSwitch = new BMap.ScaleControl();\n        ctrl.panel.overviewMapSwitch = new BMap.OverviewMapControl({isOpen:true, anchor: BMAP_ANCHOR_BOTTOM_RIGHT});\n        ctrl.panel.mapTypeSwitch = new BMap.MapTypeControl();     \n        \n        if(ctrl.panel.navigation === true)ctrl.map.addControl(ctrl.panel.navigationSwitch);\n        if(ctrl.panel.scale === true)ctrl.map.addControl(ctrl.panel.scaleSwitch);\n        if(ctrl.panel.overviewMap === true)ctrl.map.addControl(ctrl.panel.overviewMapSwitch);\n        if(ctrl.panel.mapType === true)ctrl.map.addControl(ctrl.panel.mapTypeSwitch);\n      });\n    }\n    //ctrl.map.resize();\n\n    //if (ctrl.mapCenterMoved) ctrl.map.panToMapCenter();\n\n    //if (!ctrl.map.legend && ctrl.panel.showLegend) ctrl.map.createLegend();\n\n    //ctrl.map.drawCircles();\n  }\n}\n"]}