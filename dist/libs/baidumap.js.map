{"version":3,"sources":["../../src/libs/baidumap.js"],"names":["loadJsFile","fileName","reject","fileElement","document","createElement","setAttribute","onerror","head","appendChild","loadCssFile","waitLoading","checkFun","runFun","checkTime","maxTime","delayTime","setTimeout","MP","ak","Promise","resolve","BMap","Map","BMapLib"],"mappings":";;;;;AAAA,aAASA,UAAT,CAAoBC,QAApB,EAA6C;AAAA,YAAfC,MAAe,uEAAN,IAAM;;AACzC,YAAMC,cAAcC,SAASC,aAAT,CAAuB,QAAvB,CAApB;AACAF,oBAAYG,YAAZ,CAAyB,MAAzB,EAAiC,iBAAjC;AACAH,oBAAYG,YAAZ,CAAyB,KAAzB,EAAgCL,QAAhC;AACA,YAAIC,MAAJ,EAAY;AACRC,wBAAYI,OAAZ,GAAsBL,MAAtB;AACH;AACDE,iBAASI,IAAT,CAAcC,WAAd,CAA0BN,WAA1B;AACH;;AAED,aAASO,WAAT,CAAqBT,QAArB,EAA8C;AAAA,YAAfC,MAAe,uEAAN,IAAM;;AAC1C,YAAMC,cAAcC,SAASC,aAAT,CAAuB,MAAvB,CAApB;AACAF,oBAAYG,YAAZ,CAAyB,KAAzB,EAAgC,YAAhC;AACAH,oBAAYG,YAAZ,CAAyB,MAAzB,EAAiC,UAAjC;AACAH,oBAAYG,YAAZ,CAAyB,MAAzB,EAAiCL,QAAjC;AACA,YAAIC,MAAJ,EAAY;AACRC,wBAAYI,OAAZ,GAAsBL,MAAtB;AACH;AACDE,iBAASI,IAAT,CAAcC,WAAd,CAA0BN,WAA1B;AACH;;AAED,aAASQ,WAAT,CAAqBC,QAArB,EAA+BC,MAA/B,EAAuCC,SAAvC,EAAkDC,OAAlD,EAA2DC,SAA3D,EAAsE;AAClE,YAAIJ,cAAcG,UAAUD,SAA5B,EAAuC;AACnCG,uBAAWJ,QAAX,EAAqBG,SAArB;AACAH;AACH,SAHD,MAGO;AACHI,uBAAW;AAAA,uBAAMN,YAAYC,QAAZ,EAAsBC,MAAtB,EAA8BC,SAA9B,EAAyCC,UAAUD,SAAnD,EAA8DE,SAA9D,CAAN;AAAA,aAAX,EAA2FF,SAA3F;AACH;AACJ;;AAEM,aAASI,EAAT,CAAYC,EAAZ,EAAgB;AACnB,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUnB,MAAV,EAAqB;AACpCF,uBAAW,2CAA2CmB,EAA3C,GAAgD,gBAA3D,EAA6EjB,MAA7E;AACAS,wBAAY;AAAA,uBAAO,OAAQW,IAAR,KAAkB,WAAlB,IAAiC,OAAQA,KAAKC,GAAb,KAAsB,WAA9D;AAAA,aAAZ,EAAwF,YAAM;AAC1FvB,2BAAW,iFAAX,EAA8FE,MAA9F;AACAF,2BAAW,iFAAX,EAA8FE,MAA9F;AACAF,2BAAW,iEAAX,EAA8EE,MAA9E;AACAF,2BAAW,2EAAX,EAAwFE,MAAxF;AACAF,2BAAW,6EAAX,EAA0FE,MAA1F;;AAEAF,2BAAW,+EAAX,EAA4FE,MAA5F;AACAQ,4BAAY,gFAAZ,EAA8FR,MAA9F;AACAS,4BAAY;AAAA,2BAAO,OAAQa,OAAR,KAAqB,WAA5B;AAAA,iBAAZ,EAAsD,YAAM;AACxDH,4BAAQC,IAAR;AACH,iBAFD,EAEG,GAFH,EAEQ,KAFR,EAEe,GAFf;AAGH,aAZD,EAYG,GAZH,EAYQ,KAZR,EAYe,GAZf;AAaH,SAfM,CAAP;AAgBH;;kBAjBeJ,E","file":"baidumap.js","sourcesContent":["function loadJsFile(fileName, reject = null) {\n    const fileElement = document.createElement('script');\n    fileElement.setAttribute('type', 'text/javascript');\n    fileElement.setAttribute('src', fileName);\n    if (reject) {\n        fileElement.onerror = reject;\n    }\n    document.head.appendChild(fileElement);\n}\n\nfunction loadCssFile(fileName, reject = null) {\n    const fileElement = document.createElement('link');\n    fileElement.setAttribute('rel', 'stylesheet');\n    fileElement.setAttribute('type', 'text/css');\n    fileElement.setAttribute('href', fileName);\n    if (reject) {\n        fileElement.onerror = reject;\n    }\n    document.head.appendChild(fileElement);\n}\n\nfunction waitLoading(checkFun, runFun, checkTime, maxTime, delayTime) {\n    if (checkFun() && maxTime > checkTime) {\n        setTimeout(runFun(), delayTime);\n        runFun();\n    } else {\n        setTimeout(() => waitLoading(checkFun, runFun, checkTime, maxTime - checkTime, delayTime), checkTime);\n    }\n}\n\nexport function MP(ak) {\n    return new Promise((resolve, reject) => {\n        loadJsFile('http://api.map.baidu.com/api?v=3.0&ak=' + ak + '&callback=init', reject);\n        waitLoading(() => (typeof (BMap) !== 'undefined' && typeof (BMap.Map) !== 'undefined'), () => {\n            loadJsFile('http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js', reject);\n            loadJsFile('http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js', reject);\n            loadJsFile('http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js', reject);\n            loadJsFile('http://api.map.baidu.com/library/DistanceTool/1.2/src/DistanceTool_min.js', reject);\n            loadJsFile('http://api.map.baidu.com/library/RectangleZoom/1.2/src/RectangleZoom_min.js', reject);\n\n            loadJsFile('http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.js', reject);\n            loadCssFile('http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.css', reject);\n            waitLoading(() => (typeof (BMapLib) !== 'undefined'), () => {\n                resolve(BMap);\n            }, 100, 60000, 100);\n        }, 100, 60000, 100);\n    });\n}\n"]}