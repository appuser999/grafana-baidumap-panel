{"version":3,"sources":["../../src/libs/baidumap.js"],"names":["loadJsFile","fileName","reject","fileElement","document","createElement","setAttribute","onerror","head","appendChild","loadCssFile","waitLoading","checkFun","runFun","checkTime","maxTime","delayTime","setTimeout","MP","ak","Promise","resolve","BMap","Map","BMapLib","HeatmapOverlay","MarkerClusterer","DistanceTool","RectangleZoom","TrafficControl"],"mappings":";;;;;AAAA,aAASA,UAAT,CAAoBC,QAApB,EAA6C;AAAA,YAAfC,MAAe,uEAAN,IAAM;;AACzC,YAAMC,cAAcC,SAASC,aAAT,CAAuB,QAAvB,CAApB;AACAF,oBAAYG,YAAZ,CAAyB,MAAzB,EAAiC,iBAAjC;AACAH,oBAAYG,YAAZ,CAAyB,KAAzB,EAAgCL,QAAhC;AACA,YAAIC,MAAJ,EAAY;AACRC,wBAAYI,OAAZ,GAAsBL,MAAtB;AACH;AACDE,iBAASI,IAAT,CAAcC,WAAd,CAA0BN,WAA1B;AACH;;AAED,aAASO,WAAT,CAAqBT,QAArB,EAA8C;AAAA,YAAfC,MAAe,uEAAN,IAAM;;AAC1C,YAAMC,cAAcC,SAASC,aAAT,CAAuB,MAAvB,CAApB;AACAF,oBAAYG,YAAZ,CAAyB,KAAzB,EAAgC,YAAhC;AACAH,oBAAYG,YAAZ,CAAyB,MAAzB,EAAiC,UAAjC;AACAH,oBAAYG,YAAZ,CAAyB,MAAzB,EAAiCL,QAAjC;AACA,YAAIC,MAAJ,EAAY;AACRC,wBAAYI,OAAZ,GAAsBL,MAAtB;AACH;AACDE,iBAASI,IAAT,CAAcC,WAAd,CAA0BN,WAA1B;AACH;;AAED,aAASQ,WAAT,CAAqBC,QAArB,EAA+BC,MAA/B,EAAuCC,SAAvC,EAAkDC,OAAlD,EAA2DC,SAA3D,EAAsE;AAClE,YAAIJ,cAAcG,UAAUD,SAA5B,EAAuC;AACnCG,uBAAWJ,QAAX,EAAqBG,SAArB;AACAH;AACH,SAHD,MAGO;AACHI,uBAAW;AAAA,uBAAMN,YAAYC,QAAZ,EAAsBC,MAAtB,EAA8BC,SAA9B,EAAyCC,UAAUD,SAAnD,EAA8DE,SAA9D,CAAN;AAAA,aAAX,EAA2FF,SAA3F;AACH;AACJ;;AAEM,aAASI,EAAT,CAAYC,EAAZ,EAAgB;AACnB,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUnB,MAAV,EAAqB;AACpCF,uBAAW,4CAA4CmB,EAA5C,GAAiD,gBAA5D,EAA8EjB,MAA9E;AACAS,wBAAY;AAAA,uBAAO,OAAQW,IAAR,KAAkB,WAAlB,IAAiC,OAAQA,KAAKC,GAAb,KAAsB,WAA9D;AAAA,aAAZ,EAAwF,YAAM;AAC1FvB,2BAAW,kFAAX,EAA+FE,MAA/F;AACAF,2BAAW,kFAAX,EAA+FE,MAA/F;AACAF,2BAAW,kEAAX,EAA+EE,MAA/E;AACAF,2BAAW,4EAAX,EAAyFE,MAAzF;AACAF,2BAAW,8EAAX,EAA2FE,MAA3F;;AAEAF,2BAAW,gFAAX,EAA6FE,MAA7F;AACAQ,4BAAY,iFAAZ,EAA+FR,MAA/F;AACAS,4BAAY;AAAA,2BAAO,OAAQa,OAAR,KAAqB,WAAtB,IACV,OAAQA,QAAQC,cAAhB,KAAoC,WAD1B,IAEV,OAAQD,QAAQE,eAAhB,KAAqC,WAF3B,IAGV,OAAQF,QAAQG,YAAhB,KAAkC,WAHxB,IAIV,OAAQH,QAAQI,aAAhB,KAAmC,WAJzB,IAKV,OAAQJ,QAAQK,cAAhB,KAAoC,WALhC;AAAA,iBAAZ,EAMM,YAAM;AACJR,4BAAQC,IAAR;AACH,iBARL,EAQO,GARP,EAQY,KARZ,EAQmB,GARnB;AASH,aAlBD,EAkBG,GAlBH,EAkBQ,KAlBR,EAkBe,GAlBf;AAmBH,SArBM,CAAP;AAsBH;;kBAvBeJ,E","file":"baidumap.js","sourcesContent":["function loadJsFile(fileName, reject = null) {\n    const fileElement = document.createElement('script');\n    fileElement.setAttribute('type', 'text/javascript');\n    fileElement.setAttribute('src', fileName);\n    if (reject) {\n        fileElement.onerror = reject;\n    }\n    document.head.appendChild(fileElement);\n}\n\nfunction loadCssFile(fileName, reject = null) {\n    const fileElement = document.createElement('link');\n    fileElement.setAttribute('rel', 'stylesheet');\n    fileElement.setAttribute('type', 'text/css');\n    fileElement.setAttribute('href', fileName);\n    if (reject) {\n        fileElement.onerror = reject;\n    }\n    document.head.appendChild(fileElement);\n}\n\nfunction waitLoading(checkFun, runFun, checkTime, maxTime, delayTime) {\n    if (checkFun() && maxTime > checkTime) {\n        setTimeout(runFun(), delayTime);\n        runFun();\n    } else {\n        setTimeout(() => waitLoading(checkFun, runFun, checkTime, maxTime - checkTime, delayTime), checkTime);\n    }\n}\n\nexport function MP(ak) {\n    return new Promise((resolve, reject) => {\n        loadJsFile('https://api.map.baidu.com/api?v=3.0&ak=' + ak + '&callback=init', reject);\n        waitLoading(() => (typeof (BMap) !== 'undefined' && typeof (BMap.Map) !== 'undefined'), () => {\n            loadJsFile('https://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js', reject);\n            loadJsFile('https://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js', reject);\n            loadJsFile('https://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js', reject);\n            loadJsFile('https://api.map.baidu.com/library/DistanceTool/1.2/src/DistanceTool_min.js', reject);\n            loadJsFile('https://api.map.baidu.com/library/RectangleZoom/1.2/src/RectangleZoom_min.js', reject);\n\n            loadJsFile('https://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.js', reject);\n            loadCssFile('https://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.css', reject);\n            waitLoading(() => (typeof (BMapLib) !== 'undefined')\n                && (typeof (BMapLib.HeatmapOverlay) !== 'undefined')\n                && (typeof (BMapLib.MarkerClusterer) !== 'undefined')\n                && (typeof (BMapLib.DistanceTool) !== 'undefined')\n                && (typeof (BMapLib.RectangleZoom) !== 'undefined')\n                && (typeof (BMapLib.TrafficControl) !== 'undefined')\n                , () => {\n                    resolve(BMap);\n                }, 100, 60000, 500);\n        }, 100, 60000, 500);\n    });\n}\n"]}